<html>
  <head>
  <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js'></script>
  </head>
  <body>
    <div id="debug"></div>
    <script>
      function init() {
        
        function debug(string) {
          var element = document.getElementById("debug");
          var p = document.createElement("p");
          p.appendChild(document.createTextNode(string));
          element.appendChild(p);
        }

        var Socket = "MozWebSocket" in window ? MozWebSocket : WebSocket;
        var ws = new Socket("ws://localhost:8080");
        
        ws.onmessage = function(evt) { 
          update_cursor();
          debug("Received: " + evt.data); 
        };
        
        ws.onclose = function(event) {
          debug("Closed - code: " + event.code + ", reason: " + event.reason + ", wasClean: " + event.wasClean);
        };
        
        ws.onopen = function() {
          debug("connected.");                  
        };
        
        return ws;
      };

      var data = "woooo";
      var websocket = init();
      $('#debug').click(send);

      function send() {
        websocket.send(data);          
      }

      function update_cursor() {
        
      }
    </script>
  </body>
</html>